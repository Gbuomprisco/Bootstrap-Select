$.fn.bootstrapSelect = function(e, t) {
    var n = $(this);
    var r = {
        label: false,
        input_group: false,
        "class": "default",
        parent: {
            selector: n.parent(),
            placement: "append"
        }
    };
    r = $.extend(r, e);
    var i = r.parent;
    var s = $(r.parent.selector);
    var o = ' <span class="caret"></span>';
    var u = "select-" + n.attr("id");
    var a = function() {
        h(function() {
            c();
            if (t) {
                t()
            }
        })
    };
    var f = function(e) {
        var t = $('<button class="btn" type="button" role="button" data-toggle="dropdown" id="' + e + '">');
        t.addClass("btn-" + r.class);
        var n = function(e) {
            t.html(e + o)
        };
        return {
            selector: t,
            set_label: n
        }
    };
    var l = function(e) {
        var t = $('<ul class="dropdown-menu" aria-labelledby=' + e + ' role="menu">');
        if (r.input_group) {
            t.css("top", "88.5%")
        }
        var i = "",
            s, o;
        n.find("option").each(function() {
            s = $("<li>");
            o = $("<a>");
            o.data("value", $(this).val()).html($(this).text()).css("cursor", "pointer");
            if ($(this).attr("disabled") == "true" || $(this).attr("disabled") == "disabled") {
                o.attr("disabled", "disabled")
            }
            s.append(o);
            t.append(s)
        });
        return t
    };
    var c = function() {
        n.hide();
        var e = $("#" + u);
        var t = $('[aria-labelledby="' + u + '"]');
        t.find("a").on("click", function(t) {
            var r = $(this).data("value");
            var i = $(this).text();
            n.val(r.toString()).trigger("change");
            e.html(i + o);
            t.preventDefault()
        }).css("cursor", "pointer");
        e.on("focus", function(e) {
            n.trigger("focusin");
            e.stopPropagation()
        }).on("blur", function(e) {
            n.trigger("blur");
            e.stopPropagation()
        })
    };
    var h = function(e) {
        var t = $('<div class="dropdown">');
        if (r.input_group) {
            t.addClass("input-group-btn")
        }
        var i;
        var s = new f(u);
        var o = new l(u);
        if (r.label) {
            i = r.label
        } else {
            i = n.find("option")[0].innerHTML
        }
        s.set_label(i);
        t.append(s.selector).append(o);
        p(t);
        e()
    };
    var p = function(e) {
        if (!i.placement || i.placement == "append") {
            s.append(e)
        } else {
            if (i.placement == "prepend") {
                s.prepend(e)
            } else if (i.placement == "inner") {
                s.html(e)
            }
        }
    };
    a();
    return n
}